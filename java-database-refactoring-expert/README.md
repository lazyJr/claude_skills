# Java Database Refactoring Expert

<div align="center">

**[ä¸­æ–‡](#ä¸­æ–‡æ–‡æ¡£) | [English](#english-documentation)**

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Version](https://img.shields.io/badge/version-1.0.0-green.svg)](https://github.com/YOUR_USERNAME/java-database-refactoring-expert)
[![Claude](https://img.shields.io/badge/Clade-Code-purple.svg)](https://claude.ai/code)

**è®©Javaæ•°æ®åº“é‡æ„å˜å¾—ç®€å•ã€å®‰å…¨ã€å¯æ§**

ä¸€æ¬¾ä¸“ä¸ºClaude Codeè®¾è®¡çš„AIæŠ€èƒ½ï¼Œé€šè¿‡äº¤äº’å¼å¼•å¯¼å®Œæˆå¤§å‹ç³»ç»Ÿçš„æ•°æ®åº“æ¶æ„é‡æ„ã€‚

</div>

---

## ä¸­æ–‡æ–‡æ¡£

### ğŸ“– ç®€ä»‹

**Java Database Refactoring Expert** æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„æ•°æ®åº“æ¶æ„é‡æ„åŠ©æ‰‹æŠ€èƒ½ã€‚å®ƒé‡‡ç”¨å››é˜¶æ®µå·¥ä½œæµï¼Œé€šè¿‡äº¤äº’å¼é—®ç­”æ”¶é›†ç³»ç»Ÿä¿¡æ¯ï¼Œè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„æ¶æ„è¯Šæ–­æŠ¥å‘Šå’Œå®æ–½æ–¹æ¡ˆã€‚

å½“ä½ é¢ä¸´ä»¥ä¸‹é—®é¢˜æ—¶ï¼Œæœ¬æŠ€èƒ½å¯ä»¥æä¾›å¸®åŠ©ï¼š
- ğŸ“Š **å•è¡¨å­—æ®µè¿‡å¤š**ï¼ˆ100+å­—æ®µï¼‰å¯¼è‡´æŸ¥è¯¢æ€§èƒ½ä¸‹é™
- ğŸ’¾ **æ•°æ®é‡è¿‡å¤§**ï¼ˆåƒä¸‡çº§ï¼‰éœ€è¦åˆ†åº“åˆ†è¡¨
- ğŸ”— **å­—æ®µå†—ä½™ä¸¥é‡**ï¼Œå¤šè¡¨å­˜å‚¨é‡å¤æ•°æ®
- ğŸš€ **ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆ**ï¼Œéœ€è¦æ¶æ„å‡çº§
- ğŸ”„ **åœ¨çº¿ä¸åœæœº**è¿ç§»éœ€æ±‚

---

### âœ¨ æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸ¯ **äº¤äº’å¼å¼•å¯¼** | ä½¿ç”¨å¼¹çª—é—®ç­”æ”¶é›†ä¿¡æ¯ï¼Œä½“éªŒå‹å¥½ |
| ğŸ“Š **è‡ªåŠ¨åˆ†æ** | æ™ºèƒ½åˆ†æè¡¨ç»“æ„ï¼Œè¯†åˆ«æ€§èƒ½ç“¶é¢ˆ |
| ğŸ“‹ **å¯¹æ¯”æ–‡æ¡£** | è‡ªåŠ¨ç”Ÿæˆå­—æ®µå¯¹æ¯”åˆ†ææ–‡æ¡£ |
| ğŸ—ƒï¸ **å®Œæ•´è„šæœ¬** | è¾“å‡ºDDL/è¿ç§»/æ ¡éªŒè„šæœ¬ |
| ğŸ’» **ä»£ç ç¤ºä¾‹** | æä¾›å®Œæ•´çš„Javaä»£ç æ”¹é€ ç¤ºä¾‹ |
| ğŸ”„ **åœ¨çº¿è¿ç§»** | æ”¯æŒåŒå†™å’Œç°åº¦å‘å¸ƒæ–¹æ¡ˆ |
| ğŸ“ **ä¸­æ–‡æ”¯æŒ** | ç”Ÿæˆä¸­æ–‡ç›®å½•å’Œæ–‡æ¡£ |

---

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### å®‰è£…

```bash
# å…‹éš†ä»“åº“ï¼ˆè¯·æ›¿æ¢ä¸ºå®é™…çš„ä»“åº“åœ°å€ï¼‰
git clone https://github.com/YOUR_USERNAME/java-database-refactoring-expert.git

# å¤åˆ¶æŠ€èƒ½æ–‡ä»¶åˆ°Claude CodeæŠ€èƒ½ç›®å½•
cp -r java-database-refactoring-expert ~/.claude/skills/

# æˆ–ä½¿ç”¨ç¬¦å·é“¾æ¥
ln -s $(pwd)/java-database-refactoring-expert ~/.claude/skills/
```

#### ç›®å½•ç»“æ„

```
.java-database-refactoring-expert/
â”œâ”€â”€ SKILL.md                    # æŠ€èƒ½å®šä¹‰æ–‡ä»¶ï¼ˆæ ¸å¿ƒï¼‰
â”œâ”€â”€ README.md                   # æœ¬æ–‡æ¡£
â”œâ”€â”€ references/                 # å‚è€ƒæ–‡æ¡£åº“
â”‚   â”œâ”€â”€ vertical-split.md       # å‚ç›´æ‹†åˆ†æœ€ä½³å®è·µ
â”‚   â”œâ”€â”€ horizontal-split.md     # æ°´å¹³æ‹†åˆ†ç­–ç•¥è¯¦è§£
â”‚   â”œâ”€â”€ mysql-optimization.md   # MySQLæ€§èƒ½ä¼˜åŒ–æŒ‡å—
â”‚   â””â”€â”€ data-migration.md       # æ•°æ®è¿ç§»æ–¹æ¡ˆå‚è€ƒ
â””â”€â”€ assets/                     # èµ„æºæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ images/                 # æ–‡æ¡£é…å›¾
```

#### ä½¿ç”¨æ–¹æ³•

åœ¨Claude Codeä¸­è°ƒç”¨æŠ€èƒ½ï¼š

```
/user: æˆ‘éœ€è¦å¯¹è®¢å•è¡¨è¿›è¡Œæ‹†åˆ†ï¼Œæœ‰5000ä¸‡æ•°æ®
/assistant: [è°ƒç”¨ java-database-refactoring-expert æŠ€èƒ½]
```

æŠ€èƒ½å°†é€šè¿‡äº¤äº’å¼é—®ç­”æ”¶é›†ä¿¡æ¯ï¼š

1. **é¡¹ç›®åç§°** â†’ åˆ›å»ºå·¥ä½œç›®å½•
2. **ç³»ç»Ÿä¿¡æ¯** â†’ ä¸šåŠ¡ç±»å‹ã€æŠ€æœ¯æ ˆã€æ•°æ®é‡
3. **ç—›ç‚¹é—®é¢˜** â†’ å½“å‰é‡åˆ°çš„å…·ä½“é—®é¢˜
4. **æ•°æ®åº“ç°çŠ¶** â†’ è¡¨ç»“æ„ã€ç´¢å¼•ã€æŸ¥è¯¢æƒ…å†µ
5. **ä¸šåŠ¡çº¦æŸ** â†’ ä¸€è‡´æ€§è¦æ±‚ã€åœæœºæ—¶é—´ç­‰

---

### ğŸ“‹ å››é˜¶æ®µå·¥ä½œæµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¶æ„é‡æ„å››é˜¶æ®µå·¥ä½œæµ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  é˜¶æ®µ1: ä¿¡æ¯æ”¶é›† (01-ä¿¡æ¯æ”¶é›†/)                             â”‚
â”‚   â”œâ”€â”€ ç³»ç»ŸåŸºç¡€ä¿¡æ¯.md                                       â”‚
â”‚   â”œâ”€â”€ ç—›ç‚¹ä¸é—®é¢˜.md                                         â”‚
â”‚   â”œâ”€â”€ æ•°æ®åº“ç°çŠ¶.md                                         â”‚
â”‚   â””â”€â”€ ä¸šåŠ¡çº¦æŸ.md                                           â”‚
â”‚                                                             â”‚
â”‚  é˜¶æ®µ2: æ¶æ„è¯Šæ–­ (02-æ¶æ„è¯Šæ–­/)                             â”‚
â”‚   â”œâ”€â”€ ç°çŠ¶è¯„ä¼°.md       â† æ€§èƒ½ç“¶é¢ˆåˆ†æ                      â”‚
â”‚   â”œâ”€â”€ é—®é¢˜å½’ç±».md       â† é—®é¢˜ä¼˜å…ˆçº§                        â”‚
â”‚   â””â”€â”€ æ‹†åˆ†å¿…è¦æ€§åˆ¤æ–­.md  â† æ‹†åˆ†ç±»å‹å»ºè®®                     â”‚
â”‚                                                             â”‚
â”‚  é˜¶æ®µ3: æ–¹æ¡ˆè®¾è®¡ (03-æ–¹æ¡ˆè®¾è®¡/)                             â”‚
â”‚   â”œâ”€â”€ å‚ç›´æ‹†åˆ†æ–¹æ¡ˆ.md    â† å­—æ®µåˆ†ç»„ç­–ç•¥                     â”‚
â”‚   â”œâ”€â”€ æ°´å¹³æ‹†åˆ†æ–¹æ¡ˆ.md    â† åˆ†ç‰‡ç®—æ³•è®¾è®¡                     â”‚
â”‚   â”œâ”€â”€ æŠ€æœ¯é€‰å‹.md        â† ä¸­é—´ä»¶é€‰æ‹©                       â”‚
â”‚   â””â”€â”€ æ•°æ®ä¸€è‡´æ€§æ–¹æ¡ˆ.md  â† ä¸€è‡´æ€§ä¿éšœ                       â”‚
â”‚                                                             â”‚
â”‚  é˜¶æ®µ4: å®æ–½æŒ‡å¯¼ (04-å®æ–½æŒ‡å¯¼/)                             â”‚
â”‚   â”œâ”€â”€ å­—æ®µå¯¹æ¯”åˆ†æ.md    â† è‡ªåŠ¨ç”Ÿæˆå¯¹æ¯”æ–‡æ¡£                 â”‚
â”‚   â”œâ”€â”€ åŒå†™è¿ç§»æ–¹æ¡ˆ.md    â† åœ¨çº¿è¿ç§»æ–¹æ¡ˆ                     â”‚
â”‚   â”œâ”€â”€ 00-å®æ–½æ£€æŸ¥æ¸…å•.md                                   â”‚
â”‚   â”œâ”€â”€ 01-åˆ›å»ºæ–°è¡¨DDL.sql                                   â”‚
â”‚   â”œâ”€â”€ 02-æ•°æ®è¿ç§»è„šæœ¬.sql                                   â”‚
â”‚   â”œâ”€â”€ 03-æ•°æ®æ ¡éªŒè„šæœ¬.sql                                   â”‚
â”‚   â””â”€â”€ ä»£ç ç¤ºä¾‹/                                             â”‚
â”‚       â””â”€â”€ åº”ç”¨æ”¹é€ ç¤ºä¾‹.java                                 â”‚
â”‚                                                             â”‚
â”‚  äº¤ä»˜: (05-äº¤ä»˜ç‰©/)                                         â”‚
â”‚       â”œâ”€â”€ æ¶æ„ç°çŠ¶åˆ†ææŠ¥å‘Š.md                                â”‚
â”‚       â”œâ”€â”€ æ¶æ„å‡çº§æ–¹æ¡ˆ.md                                    â”‚
â”‚       â”œâ”€â”€ å®æ–½è®¡åˆ’.md                                        â”‚
â”‚       â””â”€â”€ æ•°æ®è¿ç§»æ–¹æ¡ˆ.md                                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ“Š è¾“å‡ºç¤ºä¾‹

ä½¿ç”¨æœ¬æŠ€èƒ½åˆ†ææŸå¤§å‹ä¸šåŠ¡è¡¨ï¼ˆå¦‚è®¢å•è¡¨ã€ç”¨æˆ·è¡¨ç­‰ï¼‰åï¼Œç”Ÿæˆä»¥ä¸‹è¾“å‡ºï¼š

#### è¡¨ç»“æ„å¯¹æ¯”

| è¡¨å | å­—æ®µæ•° | è¯´æ˜ |
|------|--------|------|
| æ—§è¡¨ `demo_business_table` | **170** | æ‰€æœ‰å­—æ®µåœ¨ä¸€ä¸ªè¡¨ |
| æ–°æ ¸å¿ƒè¡¨ | **20** | å‡å°‘ **88%** â¬‡ï¸ |
| åœ°å€æ‰©å±•è¡¨ | 30 | è¯¦ç»†åœ°å€ä¿¡æ¯ |
| ä¸šåŠ¡æ‰©å±•è¡¨ | 40 | ä¸šåŠ¡ç›¸å…³å­—æ®µ |

#### ç”Ÿæˆçš„å®æ–½èµ„æº

```bash
04-å®æ–½æŒ‡å¯¼/
â”œâ”€â”€ å­—æ®µå¯¹æ¯”åˆ†æ.md           # è¯¦ç»†å­—æ®µæ˜ å°„å…³ç³»
â”œâ”€â”€ åŒå†™è¿ç§»æ–¹æ¡ˆ.md           # 6å‘¨åœ¨çº¿è¿ç§»è®¡åˆ’
â”œâ”€â”€ 00-å®æ–½æ£€æŸ¥æ¸…å•.md        # ä¸Šçº¿å‰åæ£€æŸ¥é¡¹
â”œâ”€â”€ 01-åˆ›å»ºæ–°è¡¨DDL.sql        # åˆ›å»ºæ–°è¡¨è„šæœ¬
â”œâ”€â”€ 02-æ•°æ®è¿ç§»è„šæœ¬.sql        # æ•°æ®è¿ç§»è„šæœ¬
â”œâ”€â”€ 03-æ•°æ®æ ¡éªŒè„šæœ¬.sql        # æ•°æ®ä¸€è‡´æ€§æ ¡éªŒ
â””â”€â”€ ä»£ç ç¤ºä¾‹/
    â””â”€â”€ åº”ç”¨æ”¹é€ ç¤ºä¾‹.java      # DAO/Service/Controllerç¤ºä¾‹
```

#### ä»£ç ç¤ºä¾‹

```java
// åŒå†™æ¨¡å¼ç¤ºä¾‹
@Override
@Transactional(rollbackFor = Exception.class)
public void insert(DemoDO entity) {
    // 1. å†™æ—§è¡¨ï¼ˆåŒæ­¥ï¼Œç¡®ä¿ä¸šåŠ¡æˆåŠŸï¼‰
    writeOldTable(core, address, business);

    // 2. å†™æ–°è¡¨ï¼ˆæ ¹æ®é…ç½®å¼‚æ­¥/åŒæ­¥ï¼‰
    if (stateManager.needWriteNewTable()) {
        if (Boolean.TRUE.equals(dualWrite.getAsync())) {
            asyncWriteNewTable(core, address, business);
        } else {
            syncWriteNewTable(core, address, business);
        }
    }
}

// ç°åº¦è¯»ç¤ºä¾‹
public DemoDO getByCode(String code) {
    Integer fromNewPercent = grayRead.getFromNewPercent();
    boolean readFromNew = shouldReadFromNew(code, fromNewPercent);

    return readFromNew
        ? readFromNewTable(code)
        : readFromOldTable(code);
}
```

---

### ğŸ¯ é€‚ç”¨åœºæ™¯

| åœºæ™¯ | æŠ€èƒ½è¾“å‡º |
|------|---------|
| **å•è¡¨å­—æ®µè¿‡å¤š** | å‚ç›´æ‹†åˆ†æ–¹æ¡ˆï¼ˆæ ¸å¿ƒè¡¨+æ‰©å±•è¡¨ï¼‰ |
| **æ•°æ®é‡è¿‡å¤§** | æ°´å¹³æ‹†åˆ†æ–¹æ¡ˆï¼ˆåˆ†ç‰‡ç­–ç•¥è®¾è®¡ï¼‰ |
| **å­—æ®µå†—ä½™ä¸¥é‡** | å»å†—ä½™æ–¹æ¡ˆï¼ˆå…³è”æŸ¥è¯¢è®¾è®¡ï¼‰ |
| **éœ€è¦ä¸åœæœºè¿ç§»** | åŒå†™è¿ç§»æ–¹æ¡ˆï¼ˆç°åº¦å‘å¸ƒï¼‰ |
| **åˆ†åº“åˆ†è¡¨éœ€æ±‚** | åˆ†ç‰‡ç®—æ³•è®¾è®¡ + ä¸­é—´ä»¶é€‰å‹ |

---

### ğŸ”§ æŠ€æœ¯æ ˆ

- **æ•°æ®åº“**: MySQL 5.7+, MySQL 8.0+
- **Javaæ¡†æ¶**: Spring Boot, Spring Cloud
- **ORM**: MyBatis, MyBatis-Plus
- **ä¸­é—´ä»¶**: ShardingSphere, MyCAT, TiDB
- **è¿ç§»æ–¹å¼**: åœæœºè¿ç§», åŒå†™è¿ç§», BinlogåŒæ­¥

---

### ğŸ“š å‚è€ƒæ–‡æ¡£

æŠ€èƒ½å†…ç½®ä»¥ä¸‹å‚è€ƒæ–‡æ¡£ï¼š

- `references/vertical-split.md` - å‚ç›´æ‹†åˆ†æœ€ä½³å®è·µ
  - å­—æ®µåˆ†ç»„ç­–ç•¥
  - æ ¸å¿ƒè¡¨ä¸æ‰©å±•è¡¨è®¾è®¡
  - å…³è”æŸ¥è¯¢ä¼˜åŒ–

- `references/horizontal-split.md` - æ°´å¹³æ‹†åˆ†ç­–ç•¥è¯¦è§£
  - åˆ†ç‰‡é”®é€‰æ‹©
  - åˆ†ç‰‡ç®—æ³•ï¼ˆèŒƒå›´/Hash/ä¸€è‡´æ€§Hashï¼‰
  - åˆ†ç‰‡æ•°é‡è§„åˆ’

- `references/mysql-optimization.md` - MySQLæ€§èƒ½ä¼˜åŒ–æŒ‡å—
  - ç´¢å¼•ä¼˜åŒ–ç­–ç•¥
  - æŸ¥è¯¢ä¼˜åŒ–æŠ€å·§
  - è¡¨ç»“æ„è®¾è®¡è§„èŒƒ

- `references/data-migration.md` - æ•°æ®è¿ç§»æ–¹æ¡ˆå‚è€ƒ
  - åœæœºè¿ç§»æ–¹æ¡ˆ
  - åŒå†™è¿ç§»æ–¹æ¡ˆ
  - BinlogåŒæ­¥æ–¹æ¡ˆ

---

### ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç å’Œå»ºè®®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

#### è´¡çŒ®æ–¹å‘

- ğŸ“– å®Œå–„å‚è€ƒæ–‡æ¡£ï¼ˆreferences/ï¼‰
- ğŸ¨ ä¼˜åŒ–æŠ€èƒ½äº¤äº’æµç¨‹
- ğŸ”§ å¢åŠ æ–°çš„é‡æ„æ¨¡å¼
- ğŸ› ä¿®å¤Bug
- ğŸŒ æ·»åŠ å¤šè¯­è¨€æ”¯æŒ

---

### ğŸ“ æ›´æ–°æ—¥å¿—

#### v1.0.0 (2024-02-04)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ”¯æŒå››é˜¶æ®µå·¥ä½œæµ
- âœ… è‡ªåŠ¨ç”Ÿæˆå¯¹æ¯”åˆ†ææ–‡æ¡£
- âœ… è¾“å‡ºå®Œæ•´å®æ–½èµ„æº
- âœ… ä¸­æ–‡ç›®å½•å’Œæ–‡æ¡£æ”¯æŒ
- âœ… åŒå†™è¿ç§»æ–¹æ¡ˆæ”¯æŒ

---

### â“ å¸¸è§é—®é¢˜

**Q: æŠ€èƒ½æ”¯æŒå“ªäº›æ•°æ®åº“ï¼Ÿ**
A: ç›®å‰ä¸»è¦æ”¯æŒMySQLï¼Œåç»­ä¼šæ‰©å±•åˆ°PostgreSQLã€Oracleç­‰ã€‚

**Q: ç”Ÿæˆçš„è„šæœ¬å¯ä»¥ç›´æ¥åœ¨ç”Ÿäº§ä½¿ç”¨å—ï¼Ÿ**
A: å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´åå†åº”ç”¨åˆ°ç”Ÿäº§ã€‚

**Q: æ”¯æŒå“ªäº›ORMæ¡†æ¶ï¼Ÿ**
A: ä¸»è¦é’ˆå¯¹MyBatiså’ŒMyBatis-Plusï¼Œå…¶ä»–æ¡†æ¶å¯ä»¥å‚è€ƒç¤ºä¾‹ä»£ç è¿›è¡Œé€‚é…ã€‚

**Q: å¦‚ä½•è‡ªå®šä¹‰æŠ€èƒ½çš„è¡Œä¸ºï¼Ÿ**
A: å¯ä»¥ä¿®æ”¹SKILL.mdæ–‡ä»¶ä¸­çš„å·¥ä½œæµç¨‹å’Œé—®é¢˜å®šä¹‰ã€‚

---

### ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

---

### ğŸ”— ç›¸å…³é“¾æ¥

- [Claude Code å®˜æ–¹æ–‡æ¡£](https://claude.ai/code)
- [æŠ€èƒ½å¼€å‘æŒ‡å—](https://docs.claude.ai/code/skills)
- [Issue è·Ÿè¸ª](https://github.com/YOUR_USERNAME/java-database-refactoring-expert/issues)

---

### ğŸ“® è´¡çŒ®ä¸åé¦ˆ

æ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼å‚ä¸è´¡çŒ®ï¼š

- **GitHub Issues**: [æäº¤é—®é¢˜æˆ–å»ºè®®](https://github.com/YOUR_USERNAME/java-database-refactoring-expert/issues)
- **Pull Requests**: æ¬¢è¿æäº¤ PR æ”¹è¿›æŠ€èƒ½
- **è®¨è®º**: åœ¨ Issues ä¸­äº¤æµä½¿ç”¨ç»éªŒå’Œæœ€ä½³å®è·µ

---

<div align="center">

**å¦‚æœè¿™ä¸ªæŠ€èƒ½å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ Starï¼**

Made with â¤ï¸ by Architecture Upgrade Team

</div>

---

## English Documentation

### ğŸ“– Overview

**Java Database Refactoring Expert** is a professional AI skill for Claude Code designed to guide database architecture refactoring through a four-stage workflow. It collects system information interactively and automatically generates comprehensive diagnostic reports and implementation plans.

This skill helps when you face:
- ğŸ“Š **Too many fields** (100+) in a single table causing poor query performance
- ğŸ’¾ **Large data volume** (10M+ rows) requiring database sharding
- ğŸ”— **Severe field redundancy** with duplicate data across tables
- ğŸš€ **System performance bottlenecks** requiring architecture upgrades
- ğŸ”„ **Online migration** requirements without downtime

---

### âœ¨ Key Features

| Feature | Description |
|---------|-------------|
| ğŸ¯ **Interactive Guidance** | Collects information via popup questions |
| ğŸ“Š **Automatic Analysis** | Analyzes table structures and identifies bottlenecks |
| ğŸ“‹ **Comparison Docs** | Auto-generates field comparison analysis |
| ğŸ—ƒï¸ **Complete Scripts** | Outputs DDL/migration/validation scripts |
| ğŸ’» **Code Examples** | Provides complete Java code refactoring examples |
| ğŸ”„ **Online Migration** | Supports dual-write and gray release strategies |
| ğŸ“ **Chinese Support** | Generates Chinese directories and documents |

---

### ğŸš€ Quick Start

#### Installation

```bash
# Clone the repository
# å…‹éš†ä»“åº“ï¼ˆè¯·æ›¿æ¢ä¸ºå®é™…çš„ä»“åº“åœ°å€ï¼‰
git clone https://github.com/YOUR_USERNAME/java-database-refactoring-expert.git

# Copy to Claude Code skills directory
cp -r java-database-refactoring-expert ~/.claude/skills/

# Or use symbolic link
ln -s $(pwd)/java-database-refactoring-expert ~/.claude/skills/
```

#### Usage

Invoke the skill in Claude Code:

```
/user: I need to split the orders table, it has 50 million rows
/assistant: [Calls java-database-refactoring-expert skill]
```

The skill will collect information through interactive Q&A:

1. **Project Name** â†’ Creates working directory
2. **System Info** â†’ Business type, tech stack, data volume
3. **Pain Points** â†’ Current specific problems
4. **Database Status** â†’ Table structures, indexes, queries
5. **Business Constraints** â†’ Consistency requirements, downtime tolerance

---

### ğŸ“‹ Four-Stage Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Architecture Refactoring Workflow               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Stage 1: Information Collection (01-ä¿¡æ¯æ”¶é›†/)             â”‚
â”‚   â”œâ”€â”€ System Basic Information                              â”‚
â”‚   â”œâ”€â”€ Pain Points & Problems                                â”‚
â”‚   â”œâ”€â”€ Database Current Status                               â”‚
â”‚   â””â”€â”€ Business Constraints                                  â”‚
â”‚                                                             â”‚
â”‚  Stage 2: Architecture Diagnosis (02-æ¶æ„è¯Šæ–­/)             â”‚
â”‚   â”œâ”€â”€ Current Status Assessment  â† Performance Analysis     â”‚
â”‚   â”œâ”€â”€ Problem Classification      â† Priority Matrix        â”‚
â”‚   â””â”€â”€ Splitting Necessity        â† Split Type Recommendationâ”‚
â”‚                                                             â”‚
â”‚  Stage 3: Solution Design (03-æ–¹æ¡ˆè®¾è®¡/)                   â”‚
â”‚   â”œâ”€â”€ Vertical Splitting Plan  â† Field Grouping Strategy   â”‚
â”‚   â”œâ”€â”€ Horizontal Splitting Plan â† Sharding Algorithm       â”‚
â”‚   â”œâ”€â”€ Technology Selection     â† Middleware Selection      â”‚
â”‚   â””â”€â”€ Data Consistency Plan    â† Consistency Guarantees    â”‚
â”‚                                                             â”‚
â”‚  Stage 4: Implementation Guide (04-å®æ–½æŒ‡å¯¼/)              â”‚
â”‚   â”œâ”€â”€ Field Comparison Analysis     â† Auto-generated       â”‚
â”‚   â”œâ”€â”€ Dual-Write Migration Plan     â† Online migration     â”‚
â”‚   â”œâ”€â”€ Implementation Checklist                              â”‚
â”‚   â”œâ”€â”€ DDL Scripts                                             â”‚
â”‚   â”œâ”€â”€ Migration Scripts                                       â”‚
â”‚   â”œâ”€â”€ Validation Scripts                                     â”‚
â”‚   â””â”€â”€ Code Examples/                                         â”‚
â”‚       â””â”€â”€ Application Refactoring Examples                  â”‚
â”‚                                                             â”‚
â”‚  Deliverables: (05-äº¤ä»˜ç‰©/)                                  â”‚
â”‚       â”œâ”€â”€ Architecture Analysis Report                       â”‚
â”‚       â”œâ”€â”€ Architecture Upgrade Plan                          â”‚
â”‚       â”œâ”€â”€ Implementation Plan                                â”‚
â”‚       â””â”€â”€ Data Migration Plan                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ“Š Output Example

After analyzing a logistics system requirement table, the skill generates:

#### Table Structure Comparison

| Table | Fields | Description |
|-------|--------|-------------|
| Old `demo_business_table` | **170** | All fields in one table |
| New Core Table | **20** | Reduced by **88%** â¬‡ï¸ |
| Address Extension | 30 | Detailed address info |
| Business Extension | 40 | Business-related fields |

#### Generated Implementation Resources

```bash
04-å®æ–½æŒ‡å¯¼/
â”œâ”€â”€ å­—æ®µå¯¹æ¯”åˆ†æ.md           # Detailed field mapping
â”œâ”€â”€ åŒå†™è¿ç§»æ–¹æ¡ˆ.md           # 6-week online migration plan
â”œâ”€â”€ 00-å®æ–½æ£€æŸ¥æ¸…å•.md        # Pre/post-launch checklist
â”œâ”€â”€ 01-åˆ›å»ºæ–°è¡¨DDL.sql        # DDL scripts
â”œâ”€â”€ 02-æ•°æ®è¿ç§»è„šæœ¬.sql        # Migration scripts
â”œâ”€â”€ 03-æ•°æ®æ ¡éªŒè„šæœ¬.sql        # Data validation
â””â”€â”€ ä»£ç ç¤ºä¾‹/
    â””â”€â”€ åº”ç”¨æ”¹é€ ç¤ºä¾‹.java      # DAO/Service/Controller examples
```

---

### ğŸ¯ Use Cases

| Scenario | Skill Output |
|----------|-------------|
| **Too Many Fields** | Vertical splitting (core + extension tables) |
| **Large Data Volume** | Horizontal splitting (sharding strategy) |
| **Field Redundancy** | Deduplication plan (join query design) |
| **No-Downtime Migration** | Dual-write migration (gray release) |
| **Sharding Needs** | Sharding algorithm + middleware selection |

---

### ğŸ”§ Tech Stack

- **Database**: MySQL 5.7+, MySQL 8.0+
- **Java Frameworks**: Spring Boot, Spring Cloud
- **ORM**: MyBatis, MyBatis-Plus
- **Middleware**: ShardingSphere, MyCAT, TiDB
- **Migration Methods**: Downtime, Dual-Write, Binlog Sync

---

### ğŸ“š Reference Documentation

Built-in reference documents:

- `references/vertical-split.md` - Vertical splitting best practices
- `references/horizontal-split.md` - Horizontal splitting strategies
- `references/mysql-optimization.md` - MySQL performance optimization
- `references/data-migration.md` - Data migration approaches

---

### ğŸ¤ Contributing

Contributions are welcome!

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Open a Pull Request

---

### ğŸ“„ License

This project is licensed under the [MIT License](LICENSE).

---

### ğŸ”— Related Links

- [Claude Code Documentation](https://claude.ai/code)
- [Skill Development Guide](https://docs.claude.ai/code/skills)
- [Issue Tracker](https://github.com/your-org/java-database-refactoring-expert/issues)

---

<div align="center">

**If this skill helps you, please give it a â­ï¸ Star!**

Made with â¤ï¸ by Architecture Upgrade Team

</div>
